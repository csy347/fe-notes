title: yargs.md
date: 2018-06-21 09:55:00
categories: Node
tags: yargs

---

> yargs 模块能够解决如何处理命令行参数

### 1.1 安装

> npm install yargs --save

### 1.2 读取命令行参数

yargs 模块提供了argv对象，用来读取命令行参数

``` bash
#!/usr/bin/env node

let argv = require('yargs').argv;
console.log('hello', argv.name);
```

process.argv
``` js
['/usr/local/bin/node', '/usr/local/bin/hello4', '--name=zfpx']
```

argv
```js
{
    name: 'zfpx',
}
```

### 1.3 还可以指定别名

``` js
let argv = require('yargs')
.alias('n', 'name')
.argv
```

> hello -n zfpx
> hello --name zfpx

### 1.4 下划线属性

argv对象有一个下划线属性，可以获取非连词线开头的参数

```js
    let argv = require('yargs').argv;
    console.log('hello', argv.n);
    console.log(argv._);
```

``` code
    hello A -n zfpx B C
    hello zfpx ['A', 'B', 'C']
```

### 1.5 命令行参数的配置

* demand 是否必选
* default 默认值
* describe 提示

``` js
#!/usr/bin/env node

let argv = require('yargs')
    .demand(['n'])
    .default({n: 'zfpx'})
    .describe({n: '你的名字'})
    .argv;

console.log('hello', argv.n);
```

option方法允许将所有的配置写入配置对象

``` js
#!/usr/bin/env node

let argv = require('yargs')
    .option('n', {
        alias: 'name',
        demand: true,
        default: 'zfpx',
        describe: '请输入你的名字',
        type: 'string',
        boolean: true
    }).argv;

console.log('hello', argv.n);
```

### 1.6 帮助信息

yargs模块提供了以下方法， 生产帮助信息

* usage 用法格式
* example 提供例子
* help 显示帮助信息
* epilog 出现在帮助信息的结尾

``` js
#!/usr/bin/evn node

let argv = require('argv')
    .option('n', {
        alias: 'name',
        demand: true,
        default: 'tom',
        describe: '你的名字',
        type: 'string'
    })
    .usage('Usage: hello [options]')
    .example('hello -n zfpx', 'say hello to zfpx')
    .help('h')
    .alias('h', 'help')
    .epilog('copyright 2018')
    .argv;
```

---

[来源](https://zhufengzhufeng.github.io/201802/html/23.yargs.html)















